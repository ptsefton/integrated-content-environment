<?xml version="1.0"?>
<html><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/><title>Using Javascript inside a CMS</title><style type="text/css">table {border-spacing: 0;empty-cells: show; }
.body .indent {margin-left: 25px;}
.spCh {font-family: 'Lucida Grande','Arial Unicode MS', sans-serif; font-size: 1.2em;}
span.underline {text-decoration:underline; }
Header_20_right.P1 {margin-bottom:0cm; margin-top:0cm; }
Header_20_left.P3 {font-weight:normal; }
pre2.P4 {margin-left:0cm; margin-right:0cm; text-indent:0cm; }</style></head><body><h1><a id="id1" name="id1"><!--id1--></a>What I set out to achieve</h1><p>I was trying to add JSON, RSS and ATOM feeds from a few different online services to a page on our web site. I notice the Twitter API is quite thorough and has a great JSON function that returns a list of tweets. It would be great if the other services we are using had that, however there is always Atom (preferable) or RSS.</p><h1><a id="id2" name="id2"><!--id2--></a>Feedburner</h1><p>Up until now we have been using feedburner to create and monitor our feeds. I gives great statistics. It is as simple as creating a feedburner account, logging in and pasting your subscription url into the feedburner site (can create many feeds using your account).</p><h1><a id="id3" name="id3"><!--id3--></a>Content Management System</h1><p>We are using a system that allows you create textual content using either Word or Open Office. For this page containing feeds we broke the page up using a table and then used the embedding feature that this CMS has. This now allows us to create separate .htm files and imbed them into the Word or Open Office document. Why would you want to do this ? Lets say I need a form or a JSON feed that uses Javascript. I simply create a place holder on the page and link to the code like this <span class="spCh spChx201c">&#x201C;</span>thecode.htm?embed<span class="spCh spChx201d">&#x201D;</span> </p><h1><a id="id4" name="id4"><!--id4--></a>The Code</h1><p>I am simply using the code offered by Google as part of their <a href="http://code.google.com/apis/ajax/playground/?exp=language#load_feed">feeds playground.</a></p><p>This is what we ended up with. A separate .htm file that references a .jsp file. The reason that we have a seperate htm and jsp file is that because the htm file is imbedded in the Word/Open Office file, the CMS has difficulty interpreting the symbols used in the Javascript eg &lt;. This creates a problem when the htm file contains for loops etc using these symbols.</p><h1><a id="id5" name="id5"><!--id5--></a>HTML</h1>
<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt; </pre>
<pre>&lt;head&gt; </pre>
<pre>    &lt;meta http-equiv="content-type" content="text/html; charset=utf-8"/&gt; </pre>
<pre>&lt;title&gt; </pre>
<pre>&lt;/title&gt; </pre>
<pre>&lt;link href="/skin/style.css" rel="stylesheet" type="text/css" /&gt; </pre>
<pre>&lt;link href="/skin/default.css" rel="stylesheet" type="text/css" /&gt; </pre>
<pre>&lt;/head&gt; </pre>
<pre>&lt;body&gt; </pre>
<pre>&lt;script type="text/javascript" src="http://www.google.com/jsapi"&gt;&lt;/script&gt; </pre>
<pre>    &lt;script type="text/javascript" src="javascript_file.js"&gt;&lt;/script&gt; </pre>
<pre>&lt;div id="blog_update_list" class="update_list" &gt;&lt;/div&gt; </pre>
<pre>  &lt;/body&gt; </pre>
<pre>&lt;/html&gt;</pre><p/><h1><a id="id6" name="id6"><!--id6--></a>Javascript</h1><p><br/>After using primarily Javascript, I asked for some quick advice from the programmers sitting near me and we ended up with two solutions to the following jsp. One of the solutions use Javascript only and the other uses jQuery (the write less do more library). I had a bit of an issue with the fact that the jQuery solution looks to me like building strings as apposed to using what I would describe as a more object orientated or modular approach. However it is true there is a lot less code to the jQuery solution.</p><h1><a id="id7" name="id7"><!--id7--></a>Plain Javascript Solution</h1>
<pre>  google.load("feeds", "1"); </pre>
<pre>   function initialize() { </pre>
<pre>    var feed = new google.feeds.Feed("http://feeds.feedburner.com/myfeed"); </pre>
<pre>      feed.load(function(result) { </pre>
<pre>        if (!result.error) { </pre>
<pre>          var container = document.getElementById("blog_update_list"); </pre>
<pre>          for (var i = 0; i &lt; result.feed.entries.length; i++) { </pre>
<pre>            var entry = result.feed.entries[i]; </pre>
<pre>            var attributes = ["title", "link", "publishedDate", "contentSnippet"]; </pre>
<pre>            </pre>
<pre>          var strTitle=entry[attributes[0]]; </pre>
<pre>          var strLinkage=entry[attributes[1]]; </pre>
<pre>          var strDate=entry[attributes[2]]; </pre>
<pre>          var strContent=entry[attributes[3]]; </pre>
<pre>          var elementList=document.createElement("li"); </pre>
<pre>          var aLinkElement=document.createElement("a"); </pre>
<pre>          var aLinkElementMore=document.createElement("a"); </pre>
<pre>          var brElement=document.createElement("br"); </pre>
<pre>         elementList.appendChild(document.createTextNode(strDate)); </pre>
<pre>          elementList.appendChild(brElement); </pre>
<pre>          aLinkElement.innerHTML=strTitle; </pre>
<pre>          aLinkElement.href=strLinkage; </pre>
<pre>          aLinkElement.target="_blank"; </pre>
<pre>          elementList.appendChild(aLinkElement); </pre>
<pre>          elementList.appendChild(brElement); </pre>
<pre>                             elementList.appendChild(document.createTextNode(strContent)); </pre>
<pre>          elementList.appendChild(document.createTextNode("...")); </pre>
<pre>          aLinkElementMore.innerHTML=" more"; </pre>
<pre>          aLinkElementMore.href=strLinkage; </pre>
<pre>          aLinkElementMore.target="_blank"; </pre>
<pre>          elementList.appendChild(aLinkElementMore); </pre>
<pre>          container.appendChild(elementList);</pre>
<pre>           </pre>
<pre>          } </pre>
<pre>        } </pre>
<pre>      }); </pre>
<pre>    } </pre>
<pre>    google.setOnLoadCallback(initialize);</pre><p/><h1><a id="id8" name="id8"><!--id8--></a>jQuery Solution</h1>
<pre>google.load("feeds", "1"); </pre>
<pre>   function initialize() { </pre>
<pre><!--empty--></pre>
<pre>      var feed = new google.feeds.Feed("http://feeds.feedburner.com/myfeed"); </pre>
<pre>      feed.load(function(result) { </pre>
<pre>        if (!result.error) { </pre>
<pre>          for (var i = 0; i &lt; result.feed.entries.length; i++) { </pre>
<pre>            var entry = result.feed.entries[i]; </pre>
<pre>            var attributes = ["title", "link", "publishedDate", "contentSnippet"]; </pre>
<pre>            </pre>
<pre>          var strTitle=entry[attributes[0]]; </pre>
<pre>          var strLinkage=entry[attributes[1]]; </pre>
<pre>          var strDate=entry[attributes[2]]; </pre>
<pre>          var strContent=entry[attributes[3]]; </pre>
<pre>       var container = jQ("#blog_update_list"); </pre>
<pre>       var li = jQ("&lt;li&gt;"+strDate+"&lt;br/&gt;&lt;a href='"+strLinkage+"' target='_blank'&gt;"+strTitle+"&lt;/a&gt;&lt;br/&gt;"+ </pre>
<pre>        strContent+"&lt;a href='"+strLinkage+"' target='_blank'&gt; ...more&lt;/a&gt;&lt;/li&gt;");     </pre>
<pre>       container.append(li); </pre>
<pre>           </pre>
<pre>          } </pre>
<pre>        } </pre>
<pre>      }); </pre>
<pre>    } </pre>
<pre>    google.setOnLoadCallback(initialize);</pre></body></html>
